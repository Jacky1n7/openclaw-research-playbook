# File-first Memory（文件记忆优先）

目标：不用向量库也能稳定“记得住/查得到/可审计/可手工编辑”。

## 目录约定（推荐）

- `memory/YYYY-MM-DD.md`：当天流水账（原始、可啰嗦）
- `MEMORY.md`：长期记忆（精选、短、可验证）
- `playbooks/`：方法论与流程

## 写入规则

### 1) Daily（`memory/YYYY-MM-DD.md`）写什么
- 做了什么（动作）
- 为什么做（动机/上下文）
- 结果是什么（结论/链接/文件路径）
- 卡点/风险（下一步/待确认）

### 2) Long-term（`MEMORY.md`）写什么
- 稳定偏好（沟通风格、工具偏好）
- 可复用的决策（例如：更新策略、权限策略）
- 长期项目的关键节点（repo/PR/流程固化）

> 原则：`MEMORY.md` 只存“长期有用且不敏感”的信息；敏感信息（token/账号）不写。

## 读取顺序（每次会话/任务启动）

1. `SOUL.md` / `USER.md`（身份与风格）
2. `memory/今天` + `memory/昨天`
3. 需要长期背景时再看 `MEMORY.md`

## 检索策略

- 先全文搜索：`rg -n "关键词" memory MEMORY.md playbooks`
- 再精读命中的 20–80 行上下文。

## 每周精选（curation）流程（10–20 分钟）

- 扫 7 天的 `memory/YYYY-MM-DD.md`
- 把重复出现的：
  - 可靠流程
  - 坑点/教训
  - 重要 repo/PR 链接
  摘到 `MEMORY.md`
- 删除/合并 `MEMORY.md` 里过期内容

## 输出（写作/汇报）对齐

写任何“结论”时，优先能指到：
- 一个文件路径（artifact）
- 一段日志/命令
- 一个 PR/issue 链接

这能显著提高可信度与可复现性。
